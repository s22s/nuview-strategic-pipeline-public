<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<!-- 
    NUVIEW OPP BOARD - GLOBAL TRACKER
    
    PURPOSE:
    This dashboard organizes and presents an extensive range of budgetary and workflow data
    relevant to agencies worldwide, with focus on LiDAR and space-based mapping programs.
    
    LIDAR-ENABLED SERVICES & MAPPING METADATA:
    - Core LIDAR-enabled services make mapping metadata visually accessible on the board
    - Data is layered visually on interactivity parsing forms for enhanced user engagement
    - Future-proof design enables refinable alignment context for AI workflow positioning
    
    DATA ASSUMPTIONS:
    - Opportunity budget numbers have sufficient archived-history framework
    - Structured for rapidly disseminating information across organizations/software circle apps
    - Historical data enables trend analysis and strategic forecasting
    
    FUTURE INTEGRATION CAPABILITIES:
    - Designed to connect live SharePoint via Office365 sales decks
    - Supports connected edit-primary feeds for real-time collaboration
    - Dashboard architecture supports integration with Zoomed Global Version-Agents
    - Compatible with Super Integrative CRM models for comprehensive workflow automation
-->
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex, nofollow">
  <meta name="description" content="NUVIEW Global Opportunity Tracker - Comprehensive tracking of worldwide business development opportunities, funding programs, and strategic LiDAR initiatives.">
  <meta name="theme-color" content="#000000">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://cdn.tailwindcss.com">
  <title>NUVIEW Opp Board - Global Tracker</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <style>
    /* ============================================
       NUVIEW SPACEX-INSPIRED THEME - CSS VARIABLES
       ============================================
       
       PURPOSE:
       SpaceX-inspired deep space-black theme with minimal accent red.
       Red is used ONLY for highlights: active states, badges, borders.
       Regular text uses clean off-greys and whites for readability.
       
       DESIGN PRINCIPLES:
       - Deep space-black backgrounds (#000, #0a0a0a, #1a1a1a)
       - Clean, high-contrast text (white/off-grey)
       - Accent red (#E10600) for highlights only
       - Modern card-style tables with soft stripes
       - Bold headers with subtle drop shadows
       - Mobile-friendly responsive design
       
       LAST UPDATED: 2025-11-21
       ============================================ */
    
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #000000 0%, #0a0a0a 50%, #000000 100%);
      color: #ffffff;
      min-height: 100vh;
    }
    
    /* Modern Card-Style Containers */
    .card {
      background: linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%);
      border: 2px solid #2a2a2a;
      border-radius: 1.25rem;
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.9);
      transition: all 0.3s ease;
    }
    
    .card:hover {
      box-shadow: 0 16px 48px rgba(225, 6, 0, 0.3);
      border-color: #E10600;
    }
    
    /* Accent Red - Use Sparingly */
    .text-nuview-red { color: #E10600; }
    .border-nuview-red { border-color: #E10600; }
    .bg-nuview-red { background-color: #E10600; }
    
    /* Dividers and Borders */
    .divider { border-color: #2a2a2a; }
    
    /* Table Row Highlighting - Minimal Red */
    .highlight-row { 
      background: linear-gradient(90deg, rgba(225, 6, 0, 0.15) 0%, #1a1a1a 100%);
      border-left: 3px solid #E10600;
    }
    
    /* Typography */
    h1, .dashboard-title { 
      font-weight: 800; 
      color: #ffffff; 
      letter-spacing: 0.02em;
      text-shadow: 0 4px 16px rgba(0, 0, 0, 0.8);
    }
    
    /* Screen reader only content */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border-width: 0;
    }
  </style>
</head>
<body class="min-h-screen">
  <header class="text-center py-10" role="banner">
    <div class="max-w-7xl mx-auto px-6">
      <nav class="flex justify-between items-center mb-6" aria-label="Dashboard navigation">
        <a href="index.html" class="text-sm" style="color:#888; text-decoration:none;" aria-label="Return to main dashboard">← Back to Dashboard</a>
        <a href="pipeline_matrix.html" class="text-sm" style="color:#888; text-decoration:none; margin-right: 1rem;" aria-label="View pipeline matrix">Pipeline Matrix</a>
        <a href="pipeline.html" class="text-sm" style="color:#888; text-decoration:none;" aria-label="View pipeline dashboard">Pipeline View →</a>
      </nav>
    </div>
    <img src="../assets/nuview-logo.svg" alt="NUVIEW Space Technologies Logo" class="mx-auto mb-6" style="height:70px;"/>
    <h1 class="text-5xl dashboard-title mb-2 tracking-tight">NUVIEW Opp Board - Global Tracker</h1>
    <p class="text-lg mb-2" style="color:#ECECEC;">Global Opportunity & Funding Intelligence • Agencies Worldwide</p>
    <p class="text-md" style="color:#BBB;">Live daily scoring and intelligence on global space-based mapping and LiDAR program funding.</p>
    <p class="mt-2 text-sm" style="color:#888;" id="last-updated" aria-live="polite">Daily auto-update</p>
  </header>
  <hr class="divider my-10" />

  <div class="max-w-7xl mx-auto px-6" role="main">
    <!-- Top 10 Programs -->
    <section aria-labelledby="top10-heading">
      <h2 id="top10-heading" class="sr-only">Top 10 Global Programs by Priority Score</h2>
      <div id="top10" class="grid grid-cols-1 md:grid-cols-5 gap-6 mb-12" role="list"></div>
    </section>
    
    <!-- Global Priority Matrix Table -->
    <section aria-labelledby="matrix-heading">
      <h2 id="matrix-heading" class="sr-only">Global Priority Matrix - All Programs</h2>
      <div class="rounded-2xl border border-nuview-red card overflow-hidden">
        <table id="matrix" class="w-full text-sm" role="table" aria-label="Global priority matrix showing all space and LiDAR programs">
          <thead style="background:#222226;">
            <tr>
              <th scope="col" class="px-4 py-3 font-semibold text-nuview-red">Rank</th>
              <th scope="col" class="font-semibold">Country</th>
              <th scope="col" class="font-semibold">Agency</th>
              <th scope="col" class="font-semibold">Program</th>
              <th scope="col" class="font-semibold">FY26 USD</th>
              <th scope="col" class="font-semibold text-nuview-red">Score</th>
              <th scope="col" class="font-semibold">Data</th>
              <th scope="col" class="font-semibold">Source</th>
            </tr>
          </thead>
          <tbody id="rows"></tbody>
        </table>
      </div>
    </section>
  </div>

  <script>
    /**
     * NUVIEW Global Tracker - Data Loading and Rendering
     * 
     * This script loads global space/LiDAR program data from priority_matrix.csv
     * and renders it as:
     * 1. Top 10 programs card display (by priority score)
     * 2. Full priority matrix table with all programs
     * 
     * Data Source: ../data/processed/priority_matrix.csv
     * CSV Columns: country, agency_name, program_name, budget_amount_usd, 
     *              nuview_priority_score, data_access, sources
     * 
     * Highlighting: Programs with priority score > 90 are highlighted in red
     */
    Papa.parse("../data/processed/priority_matrix.csv", {
      download: true,
      header: true,
      complete: function(results) {
        // Filter out empty rows and sort by priority score (descending)
        const data = results.data.filter(r => r.country && r.nuview_priority_score).sort((a,b) => Number(b.nuview_priority_score) - Number(a.nuview_priority_score));
        const top10 = data.slice(0,10);
        
        // Update last updated date to current date (data is auto-updated daily)
        const today = new Date();
        const dateStr = today.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
        document.getElementById("last-updated").textContent = `Daily auto-update — ${dateStr}`;
        
        // Render Top 10 Programs as cards
        document.getElementById("top10").innerHTML = top10.map((r,i) => `
          <div class="card rounded-xl p-6 text-center border border-nuview-red">
            <div class="text-4xl font-extrabold text-nuview-red mb-1">#${i+1}</div>
            <div class="text-2xl" style="color:#fff;">${r.country}</div>
            <div class="text-3xl mt-4 text-nuview-red">$${Math.round(Number(r.budget_amount_usd)/1e6)}M</div>
            <div class="text-xl" style="color:#fff;">Score <span class="text-nuview-red">${r.nuview_priority_score}</span></div>
          </div>`).join('');

        // Render Full Priority Matrix Table
        // Note: Rows with priority score > 90 receive 'highlight-row' class for visual emphasis
        document.getElementById("rows").innerHTML = data.map((r,i) => `
          <tr class="${Number(r.nuview_priority_score) > 90 ? 'highlight-row' : ''}">
            <td class="px-4 py-3 font-bold text-nuview-red">${i+1}</td>
            <td>${r.country}</td>
            <td>${r.agency_url && r.agency_url !== '#' ? `<a href="${r.agency_url}" target="_blank" class="underline text-white hover:text-nuview-red" title="Visit ${r.agency_name} website">${r.agency_name}</a>` : r.agency_name}</td>
            <td>${r.program_name}</td>
            <td>$${(Number(r.budget_amount_usd)/1e6).toFixed(1)}M</td>
            <td class="font-semibold text-nuview-red">${r.nuview_priority_score}</td>
            <td>${r.data_access}</td>
            <td>${(r.budget_source_url || r.sources) && (r.budget_source_url !== '#' || r.sources !== '#') ? `<a href="${r.budget_source_url || r.sources}" target="_blank" class="underline text-nuview-red" title="View budget/program source">Budget</a>` : 'N/A'}</td>
          </tr>`).join('');
      }
    });
  </script>
</body>
</html>
